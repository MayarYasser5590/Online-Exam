<section class="results-container">
  <div class="flex justify-between text-[#6B7280] text-[14px] font-geist font-normal items-center">
    <h3>{{ diplomaTitle }} - {{ examTitle }}</h3>
    <span
      >Question <span class="text-main font-semibold">{{ currentIndex + 1 }}</span> of
      {{ total }}</span
    >
  </div>

  <p-progressBar [value]="progress" [showValue]="false" class="custom-progress"></p-progressBar>
  <h2 class="text-main pt-4 text-[24px] font-geist font-semibold mb-4">Results:</h2>

  <div
    class="lg:flex lg:justify-between lg:items-start lg:h-[414px] border relative border-[#F3F4F6] lg:overflow-y-auto"
  >
    <div class="results-summary flex flex-col items-center gap-4 sticky top-20 my-3 lg:my-0">
      <p-chart
        type="doughnut"
        [data]="chartData"
        [options]="chartOptions"
        class="lg:w-[203px] lg:h-[203px]"
      ></p-chart>

      <div class="flex flex-col mt-2 gap-2 text-[14px] font-geist">
        <div class="flex items-center gap-2">
          <span class="w-3 h-3 bg-emerald-500"></span>
          <span class="text-gray-800">Correct : {{ correctCount }}</span>
        </div>

        <div class="flex items-center gap-2">
          <span class="w-3 h-3 bg-red-500"></span>
          <span class="text-gray-800">Incorrect : {{ questions.length - correctCount }}</span>
        </div>
      </div>
    </div>

    <div class="review flex flex-col gap-3">
      @for (q of questions; track q._id) {
      <p-card class="review-card">
        <h3 class="text-[14px] text-main font-geist font-semibold mb-4">{{ q.question }}</h3>
        <div class="bg-[#FEF2F2] p-2 md:p-4 mt-10px">
          <p class="flex items-center">
            <span class="w-3 h-3 border-2 border-[#d1d5db] bg-red-400 rounded-[50%]"></span>
            <span class="ps-2">{{ getSelectedAnswer(q) }}</span>
          </p>
        </div>
        <div class="bg-[#ECFDF5] p-2 md:p-4 mt-[10px]">
          <p class="flex items-center">
            <span class="w-3 h-3 border-2 border-[#d1d5db] bg-emerald-400 rounded-[50%]"></span>
            <span class="ps-2">{{ getCorrectAnswer(q) }}</span>
          </p>
        </div>
      </p-card>
      }
    </div>
  </div>

  <div class="actions flex justify-between gap-6 mt-6 items-center">
    <div class="flex-1">
      <p-button styleClass="w-full" label="Restart" severity="secondary" (onClick)="restart.emit()">
      </p-button>
    </div>
    <div class="flex-1">
      <p-button
        styleClass="w-full !bg-main flex justify-center items-center cursor-pointer gap-[10px]"
        routerLink="/exams"
      >
        <img class="w-[18px] h-[18px]" src="/assets/folder-search.png" alt="folder-search" />
        <span>Explore</span>
      </p-button>
    </div>
  </div>
</section>
